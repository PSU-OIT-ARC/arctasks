[uwsgi]
master = true

uid = {service.user}
gid = nginx

processes = 2
threads = 4
single-interpreter = true

logto2 = {remote.path.env}/uwsgi.log

socket = /tmp/uwsgi-{domain_name}.sock
chmod-socket = 664

chdir = {remote.path.root}
home = {remote.build.venv}

wsgi-file = {remote.build.wsgi_file}

; Clean up socket and pid files on exit
vacuum = true

; Kill requests that take too long
harakiri = 30

; Reload when memory usage gets too high
reload-on-rss = 256

; Ensure POST bodies are read
post-buffering = 1

env = DJANGO_SETTINGS_MODULE={django_settings_module}
env = LOCAL_SETTINGS_FILE={remote.path.env}/local.cfg
env = WSGI_ROOT={remote.path.root}
env = WSGI_VENV={remote.build.venv}
